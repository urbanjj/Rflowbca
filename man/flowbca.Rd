% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/flowbca.R
\name{flowbca}
\alias{flowbca}
\title{A Flow-based Cluster Algorithm in R}
\usage{
flowbca(
  data,
  q = 0,
  k = 1,
  opt_f = 1,
  la = 1.1,
  lw = 1.1,
  lm = 1.1,
  save_k = FALSE
)
}
\arguments{
\item{data}{A data frame where the first column contains source unit identifiers
and subsequent columns represent the flows to destination units. The destination
columns must be in the same order as the source unit rows.}

\item{q}{A numeric flow threshold (can be relative or absolute) that will
adjust the default stopping criterion. The algorithm stops if the maximum
flow for merging is below this value. Defaults to 0.}

\item{k}{An integer specifying the desired number of distinct clusters. The
algorithm stops when this number of clusters is reached. Defaults to 1.}

\item{opt_f}{An integer specifying the optimization function:
1: Directed relative flows (default)
2: Undirected relative flows
3: Directed absolute flows
4: Undirected absolute flows}

\item{la}{A numeric value for the average of the internal relative flows of all
clusters. The algorithm terminates if the calculated average (La) exceeds
this value. Defaults to 1.1 (effectively off).}

\item{lw}{A numeric value for the weighted average of the internal relative flows
of all clusters. The algorithm terminates if the calculated weighted average
(Lw) exceeds this value. Defaults to 1.1 (effectively off).}

\item{lm}{A numeric value for the minimum internal relative flow. The algorithm
terminates if the calculated minimum (Lm) exceeds this value. Defaults to
1.1 (effectively off).}

\item{save_k}{Return list of matrices}
}
\value{
A list containing two data frames:
  - `unit_set`: Details of the final cluster assignment for each original unit.
  - `cluster_set`: Statistics for the final clusters.
}
\description{
This function is an R translation of the flowbca.ado Stata package
by Jordy Meekes (2018). It implements a hierarchical clustering algorithm
for flow data, including the detailed tie-breaking rules from the original
Mata implementation.
}
